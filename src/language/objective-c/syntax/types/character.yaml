id: character
title: å­—ç¬¦
query: Objective-C å­—ç¬¦ç±»å‹
description: Objective-C ç»§æ‰¿äº† C è¯­è¨€çš„ `char` ç±»å‹æ¥è¡¨ç¤ºå•ä¸ª 8 ä½å­—ç¬¦ï¼ˆé€šå¸¸æ˜¯ ASCIIï¼‰ã€‚å¯¹äºæ›´å¹¿æ³›çš„ Unicode å­—ç¬¦ï¼ŒObjective-C ä½¿ç”¨ `unichar` ç±»å‹ï¼ˆæœ¬è´¨ä¸Šæ˜¯ `unsigned short`ï¼Œç”¨äº UTF-16 ç¼–ç ï¼‰ä»¥åŠ `NSString` å¯¹è±¡æ¥å¤„ç†å­—ç¬¦åºåˆ—ã€‚å­—ç¬¦ç±»å‹ç”¨äºè¡¨ç¤ºæ–‡æœ¬çš„åŸºæœ¬å•ä½ã€‚
usage:
  - title: åˆ›å»º char å­—ç¬¦
    description: |
      `char` æ˜¯ C è¯­è¨€çš„åŸºç¡€ç±»å‹ï¼Œåœ¨ Objective-C ä¸­åŒæ ·å¯ç”¨ã€‚å®ƒé€šå¸¸ç”¨äºå­˜å‚¨ ASCII å­—ç¬¦ã€‚

      **è¯­æ³•:**
      - ä½¿ç”¨å•å¼•å· `' '` å°†å­—ç¬¦æ‹¬èµ·æ¥è¿›è¡Œèµ‹å€¼ã€‚
      - `char` å˜é‡å­˜å‚¨çš„æ˜¯å­—ç¬¦å¯¹åº”çš„æ•´æ•°å€¼ï¼ˆASCII ç ï¼‰ã€‚
    example: |
      ```objectivec
      #import <Foundation/Foundation.h>

      int main(int argc, const char * argv[]) {
          @autoreleasepool {
              // å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ª char å˜é‡
              char grade = 'A'; // å°†å­—ç¬¦ 'A' èµ‹å€¼ç»™ grade
              char exclamationMark = '!'; // å°†å­—ç¬¦ '!' èµ‹å€¼ç»™ exclamationMark

              // æ‰“å° char å˜é‡çš„å€¼ï¼Œä½¿ç”¨ %c æ ¼å¼è¯´æ˜ç¬¦
              NSLog(@"Grade: %c", grade); // è¾“å‡º: Grade: A
              NSLog(@"Symbol: %c", exclamationMark); // è¾“å‡º: Symbol: !

              // char å®é™…ä¸Šå­˜å‚¨çš„æ˜¯æ•´æ•° ASCII å€¼
              NSLog(@"ASCII value of Grade: %d", grade); // è¾“å‡º: ASCII value of Grade: 65
          }
          return 0;
      }
      ```
  - title: åˆ›å»º unichar å­—ç¬¦
    description: |
      `unichar` æ˜¯ Objective-C (Cocoa/Cocoa Touch) ä¸­å¸¸ç”¨çš„ç±»å‹ï¼Œç”¨äºè¡¨ç¤º Unicode å­—ç¬¦ã€‚å®ƒæ˜¯ä¸€ä¸ª `unsigned short` çš„ç±»å‹åˆ«åï¼Œé€šå¸¸å­˜å‚¨ UTF-16 ç¼–ç å•å…ƒã€‚

      **è¯­æ³•:**
      - å¯ä»¥ç›´æ¥èµ‹æ•´æ•°å€¼ï¼ˆå­—ç¬¦çš„ Unicode ç ç‚¹ï¼‰ã€‚
      - å¯ä»¥ä½¿ç”¨å•å¼•å· `' '` èµ‹å€¼ï¼ˆå¦‚æœå­—ç¬¦åœ¨ ASCII èŒƒå›´å†…ï¼‰ã€‚
      - å¯¹äº ASCII èŒƒå›´å¤–çš„å­—ç¬¦ï¼Œç›´æ¥èµ‹å€¼æ•´æ•°ç ç‚¹æ›´å¸¸è§ã€‚
    example: |
      ```objectivec
      #import <Foundation/Foundation.h>

      int main(int argc, const char * argv[]) {
          @autoreleasepool {
              // å£°æ˜å¹¶åˆå§‹åŒ– unichar å˜é‡
              unichar copyrightSymbol = 0x00A9; // ç‰ˆæƒç¬¦å· 'Â©' çš„ Unicode ç ç‚¹ (åå…­è¿›åˆ¶)
              unichar heartSymbol = 0x2665; // å¿ƒå½¢ç¬¦å· 'â™¥' çš„ Unicode ç ç‚¹ (åå…­è¿›åˆ¶)
              unichar letterA = 'A'; // ä¹Ÿå¯ä»¥ç›´æ¥èµ‹ ASCII å­—ç¬¦

              // æ‰“å° unichar å˜é‡çš„å€¼ï¼Œéœ€è¦å…ˆè½¬æ¢ä¸º NSStringï¼Œå› ä¸º NSLog çš„ %c ç”¨äº char
              // ä½¿ç”¨ +[NSString stringWithCharacters:length:]
              NSString *copyrightString = [NSString stringWithCharacters:&copyrightSymbol length:1];
              NSString *heartString = [NSString stringWithCharacters:&heartSymbol length:1];
              NSString *letterAString = [NSString stringWithCharacters:&letterA length:1];

              NSLog(@"Copyright Symbol: %@", copyrightString); // è¾“å‡º: Copyright Symbol: Â©
              NSLog(@"Heart Symbol: %@", heartString); // è¾“å‡º: Heart Symbol: â™¥
              NSLog(@"Letter A: %@", letterAString); // è¾“å‡º: Letter A: A

              // ä¹Ÿå¯ä»¥ä½¿ç”¨ NSLog çš„ %C (å¤§å†™ C) æ ¼å¼è¯´æ˜ç¬¦ç›´æ¥æ‰“å° unichar
              NSLog(@"Direct print copyright: %C", copyrightSymbol); // è¾“å‡º: Direct print copyright: Â©
              NSLog(@"Direct print heart: %C", heartSymbol); // è¾“å‡º: Direct print heart: â™¥
          }
          return 0;
      }
      ```
  - title: å­—ç¬¦ä¸ NSString ä¹‹é—´çš„è½¬æ¢
    description: |
      åœ¨ Objective-C ä¸­ï¼Œç»å¸¸éœ€è¦åœ¨ `char`ã€`unichar` å’Œ `NSString` å¯¹è±¡ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚

      **å…³é”®æ–¹æ³•/æ ¼å¼åŒ–å­—ç¬¦ä¸²:**
      - `+[NSString stringWithFormat:@"%c", charValue]`: å°† `char` è½¬æ¢ä¸º `NSString`ã€‚
      - `+[NSString stringWithFormat:@"%C", unicharValue]`: å°† `unichar` è½¬æ¢ä¸º `NSString`ã€‚
      - `-[NSString characterAtIndex:index]`: è·å– `NSString` ä¸­æŒ‡å®šç´¢å¼•å¤„çš„ `unichar` å­—ç¬¦ã€‚
      - `-[NSString UTF8String]`: è·å– `NSString` çš„ UTF-8 ç¼–ç çš„ C å­—ç¬¦ä¸² (`const char *`)ã€‚å¯ä»¥ä»ä¸­æå– `char`ï¼Œä½†è¦æ³¨æ„å¤šå­—èŠ‚å­—ç¬¦å’Œç¼–ç é—®é¢˜ã€‚
      - `-[NSString cStringUsingEncoding:encoding]`: è·å–æŒ‡å®šç¼–ç çš„ C å­—ç¬¦ä¸² (`const char *`)ã€‚
    example: |
      ```objectivec
      #import <Foundation/Foundation.h>

      int main(int argc, const char * argv[]) {
          @autoreleasepool {
              // 1. char/unichar è½¬ NSString
              char myChar = 'X';
              unichar myUnichar = L'Ï€'; // 'Ï€' çš„ Unicode å­—ç¬¦

              NSString *stringFromChar = [NSString stringWithFormat:@"%c", myChar];
              NSString *stringFromUnichar = [NSString stringWithFormat:@"%C", myUnichar];

              NSLog(@"String from char '%c': %@", myChar, stringFromChar);
              // è¾“å‡º: String from char 'X': X
              NSLog(@"String from unichar '%C': %@", myUnichar, stringFromUnichar);
              // è¾“å‡º: String from unichar 'Ï€': Ï€

              // 2. NSString è½¬ unichar
              NSString *hello = @"Hello";
              if ([hello length] > 0) {
                  unichar firstChar = [hello characterAtIndex:0]; // è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦ 'H'
                  NSLog(@"First character of '%@' is '%C' (unichar)", hello, firstChar);
                  // è¾“å‡º: First character of 'Hello' is 'H' (unichar)
              }

              // 3. NSString è½¬ char (é€šè¿‡ UTF8String)
              NSString *simpleString = @"ABC";
              const char *utf8CString = [simpleString UTF8String]; // è·å– UTF-8 C å­—ç¬¦ä¸²

              if (utf8CString != NULL && strlen(utf8CString) > 1) {
                  char secondChar = utf8CString[1]; // è·å–ç¬¬äºŒä¸ªå­—ç¬¦ 'B'
                  NSLog(@"Second char of '%@' (from UTF8) is '%c'", simpleString, secondChar);
                   // è¾“å‡º: Second char of 'ABC' (from UTF8) is 'B'
              }

              // æ³¨æ„ï¼šå¯¹äºé ASCII å­—ç¬¦ï¼Œç›´æ¥ä» UTF8String å–å•ä¸ª char å¯èƒ½ä¸æ­£ç¡®
              NSString *unicodeStr = @"ä½ å¥½";
              const char *utf8ä½ å¥½ = [unicodeStr UTF8String];
              // utf8ä½ å¥½[0] ä¸æ˜¯ 'ä½ 'ï¼Œè€Œæ˜¯ 'ä½ ' è¿™ä¸ªæ±‰å­—çš„ UTF-8 ç¼–ç çš„ç¬¬ä¸€ä¸ªå­—èŠ‚
              NSLog(@"First byte of 'ä½ å¥½' in UTF-8: %d", utf8ä½ å¥½[0]); // è¾“å‡ºç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ•´æ•°å€¼
          }
          return 0;
      }
      ```
  - title: è®¿é—® NSString ä¸­çš„å­—ç¬¦
    description: |
      `NSString` æ˜¯ä¸€ç³»åˆ— `unichar` å­—ç¬¦çš„åºåˆ—ã€‚å¯ä»¥ä½¿ç”¨ `characterAtIndex:` æ–¹æ³•æ¥è®¿é—®ç‰¹å®šä½ç½®çš„å­—ç¬¦ã€‚

      **å…³é”®æ–¹æ³•:**
      - `-[NSString characterAtIndex:index]`: è¿”å›æŒ‡å®šç´¢å¼• `index` å¤„çš„ `unichar` å€¼ã€‚ç´¢å¼•ä» 0 å¼€å§‹ã€‚å¦‚æœç´¢å¼•è¶Šç•Œï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
      - `-[NSString length]`: è¿”å›å­—ç¬¦ä¸²ä¸­ `unichar` å­—ç¬¦çš„æ•°é‡ã€‚æ³¨æ„ï¼Œè¿™å¯èƒ½ä¸ç­‰äºè§†è§‰ä¸Šçš„å­—ç¬¦æ•°ï¼Œå› ä¸ºæŸäº› Unicode å­—ç¬¦ï¼ˆå¦‚ Emojiï¼‰å¯èƒ½ç”±å¤šä¸ª `unichar` ç»„æˆï¼ˆä»£ç†å¯¹ï¼‰ã€‚

      **è·å–å•ä¸ªå­—ç¬¦çš„ `NSString` å­ä¸²:**
      - `-[NSString substringWithRange:range]`: å¯ä»¥ç”¨æ¥æå–åŒ…å«å•ä¸ªå­—ç¬¦çš„å­å­—ç¬¦ä¸²ã€‚
    example: |
      ```objectivec
      #import <Foundation/Foundation.h>

      int main(int argc, const char * argv[]) {
          @autoreleasepool {
              NSString *greeting = @"Welcome!";
              NSUInteger len = [greeting length]; // è·å–å­—ç¬¦ä¸²é•¿åº¦ (8)

              if (len > 0) {
                  // è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦ (W)
                  unichar firstChar = [greeting characterAtIndex:0];
                  NSLog(@"First char: %C", firstChar); // è¾“å‡º: First char: W

                  // è·å–æœ€åä¸€ä¸ªå­—ç¬¦ (!)
                  unichar lastChar = [greeting characterAtIndex:len - 1];
                  NSLog(@"Last char: %C", lastChar); // è¾“å‡º: Last char: !
              }

              // éå†å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ª unichar
              NSLog(@"Characters in '%@':", greeting);
              for (NSUInteger i = 0; i < len; i++) {
                  unichar currentChar = [greeting characterAtIndex:i];
                  NSLog(@"  Index %lu: %C", (unsigned long)i, currentChar);
              }
              /* è¾“å‡º:
                 Characters in 'Welcome!':
                   Index 0: W
                   Index 1: e
                   Index 2: l
                   Index 3: c
                   Index 4: o
                   Index 5: m
                   Index 6: e
                   Index 7: !
              */

              // è·å–å•ä¸ªå­—ç¬¦çš„å­å­—ç¬¦ä¸²
              if (len > 3) {
                  NSRange range = NSMakeRange(3, 1); // ä»ç´¢å¼• 3 å¼€å§‹ï¼Œé•¿åº¦ä¸º 1 (å­—ç¬¦ 'c')
                  NSString *charSubstring = [greeting substringWithRange:range];
                  NSLog(@"Substring for character at index 3: %@", charSubstring); // è¾“å‡º: Substring for character at index 3: c
              }

              // å¤„ç†å¯èƒ½åŒ…å«ä»£ç†å¯¹çš„å­—ç¬¦ (å¦‚ Emoji)
              NSString *emojiString = @"ä½ å¥½ğŸ˜Š"; // ğŸ˜Š å¯èƒ½ç”±ä¸¤ä¸ª unichar ç»„æˆ
              NSLog(@"Length of '%@' in unichars: %lu", emojiString, [emojiString length]);
              // è¾“å‡º: Length of 'ä½ å¥½ğŸ˜Š' in unichars: 4 (ä½ å¥½å„å 1ï¼ŒğŸ˜Šå 2)

              // æ­£ç¡®å¤„ç†è¿™ç§å­—ç¬¦ä¸²éœ€è¦æ›´å¤æ‚çš„é€»è¾‘ï¼Œä¾‹å¦‚ä½¿ç”¨ enumerateSubstringsInRange:options:usingBlock:
              [emojiString enumerateSubstringsInRange:NSMakeRange(0, [emojiString length])
                                             options:NSStringEnumerationByComposedCharacterSequences
                                          usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
                  NSLog(@"Composed character: %@", substring);
              }];
              /* è¾“å‡º:
                 Composed character: ä½ 
                 Composed character: å¥½
                 Composed character: ğŸ˜Š
              */
          }
          return 0;
      }
      ```
  - title: å¤„ç†å­—ç¬¦ç¼–ç 
    description: |
      ç†è§£å­—ç¬¦ç¼–ç åœ¨å¤„ç† `char`ã€`unichar` å’Œ `NSString` æ—¶éå¸¸é‡è¦ã€‚
      - `char`: é€šå¸¸ç”¨äº ASCII æˆ–ç‰¹å®š 8 ä½ç¼–ç ï¼ˆå¦‚ Latin-1ï¼‰ã€‚åœ¨å¤„ç†æ¥è‡ªå¤–éƒ¨ï¼ˆå¦‚æ–‡ä»¶ã€ç½‘ç»œï¼‰çš„æ•°æ®æ—¶ï¼Œéœ€è¦çŸ¥é“å…¶å…·ä½“ç¼–ç ã€‚
      - `unichar`: ç”¨äº UTF-16 ç¼–ç å•å…ƒï¼Œæ˜¯ Cocoa/Cocoa Touch å†…éƒ¨è¡¨ç¤º Unicode çš„åŸºç¡€ã€‚
      - `NSString`: å†…éƒ¨ä½¿ç”¨ Unicode (é€šå¸¸æ˜¯ UTF-16)ï¼Œå¹¶æä¾›äº†ä¸å…¶ä»–ç¼–ç ï¼ˆå¦‚ UTF-8ï¼‰è¿›è¡Œè½¬æ¢çš„æ–¹æ³•ã€‚

      **å…³é”®æ–¹æ³•/å±æ€§:**
      - `-[NSString UTF8String]`: å°† `NSString` è½¬æ¢ä¸º UTF-8 ç¼–ç çš„ C å­—ç¬¦ä¸² (`const char *`)ã€‚è¿™æ˜¯ä¸éœ€è¦ C å­—ç¬¦ä¸²çš„ API äº¤äº’çš„å¸¸ç”¨æ–¹æ³•ã€‚
      - `-[NSString cStringUsingEncoding:]`: è½¬æ¢ä¸ºæŒ‡å®šç¼–ç çš„ C å­—ç¬¦ä¸²ã€‚
      - `+[NSString stringWithCString:encoding:]`: ä»æŒ‡å®šç¼–ç çš„ C å­—ç¬¦ä¸²åˆ›å»º `NSString`ã€‚
      - `NSUTF8StringEncoding`, `NSASCIIStringEncoding`, etc.: ç”¨äºæŒ‡å®šç¼–ç çš„å¸¸é‡ã€‚
    example: |
      ```objectivec
      #import <Foundation/Foundation.h>

      int main(int argc, const char * argv[]) {
          @autoreleasepool {
              NSString *message = @"è¿™æ˜¯ä¸€ä¸ªä¾‹å­ã€‚"; // åŒ…å«ä¸­æ–‡å­—ç¬¦çš„ NSString

              // 1. è·å– UTF-8 C å­—ç¬¦ä¸²
              const char *utf8Rep = [message UTF8String];
              if (utf8Rep) {
                  NSLog(@"UTF-8 Representation (as string): %s", utf8Rep);
                  // è¾“å‡º: UTF-8 Representation (as string): è¿™æ˜¯ä¸€ä¸ªä¾‹å­ã€‚
                  // æ³¨æ„ï¼š %s ä¾èµ–äºç»ˆç«¯æ­£ç¡®å¤„ç† UTF-8
                  NSLog(@"Length of UTF-8 C string: %lu bytes", strlen(utf8Rep));
                  // è¾“å‡º: Length of UTF-8 C string: 25 bytes (æ¯ä¸ªæ±‰å­—3å­—èŠ‚ï¼Œå¥å·3å­—èŠ‚ï¼Œè‹±æ–‡å­—æ¯å’Œç‚¹å„1å­—èŠ‚)
              }

              // 2. ä» UTF-8 C å­—ç¬¦ä¸²åˆ›å»º NSString
              // å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª UTF-8 ç¼–ç çš„ C å­—ç¬¦ä¸²
              const char *receivedData = "Hello from C!";
              NSString *stringFromUTF8 = [NSString stringWithCString:receivedData encoding:NSUTF8StringEncoding];
              if (stringFromUTF8) {
                  NSLog(@"NSString from UTF-8 C string: %@", stringFromUTF8);
                   // è¾“å‡º: NSString from UTF-8 C string: Hello from C!
              } else {
                  NSLog(@"Failed to create NSString from UTF-8 C string.");
              }

              // 3. å°è¯•ä½¿ç”¨é”™è¯¯çš„ç¼–ç  (ASCII) è¯»å–åŒ…å«é ASCII å­—ç¬¦çš„ UTF-8 æ•°æ®
              const char *utf8Chinese = "ä½ å¥½"; // UTF-8 bytes for "ä½ å¥½"
              NSString *stringFromAsciiAttempt = [NSString stringWithCString:utf8Chinese encoding:NSASCIIStringEncoding];
              if (stringFromAsciiAttempt) {
                  NSLog(@"Attempt to read 'ä½ å¥½' as ASCII: %@", stringFromAsciiAttempt);
                  // è¾“å‡ºå¯èƒ½ä¸ºç©ºæˆ–è€…ä¹±ç ï¼Œå› ä¸ºå­—èŠ‚åºåˆ—åœ¨ ASCII ä¸‹æ— æ•ˆ
              } else {
                  NSLog(@"Failed to create NSString from '%s' using ASCII encoding (expected).", utf8Chinese);
                  // è¾“å‡º: Failed to create NSString from 'ä½ å¥½' using ASCII encoding (expected).
              }

              // 4. æ­£ç¡®åœ°ä» UTF-8 C å­—ç¬¦ä¸²åˆ›å»º NSString
              NSString *correctStringFromUTF8 = [NSString stringWithCString:utf8Chinese encoding:NSUTF8StringEncoding];
              if (correctStringFromUTF8) {
                   NSLog(@"Correctly read 'ä½ å¥½' from UTF-8: %@", correctStringFromUTF8);
                   // è¾“å‡º: Correctly read 'ä½ å¥½' from UTF-8: ä½ å¥½
              }
          }
          return 0;
      }
      ```
